<div class="panel panel-default" id="panel{{playlist['id']}}">
    <div class="panel-heading" role="tab" id="heading{{playlist['id']}}">
        <h4 class="panel-title">
            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse{{playlist['id']}}" aria-expanded="false"
                aria-controls="collapse{{playlist['id']}}">
          {{playlist['name']}}
        </a>
        </h4>
    </div>
    <div id="collapse{{playlist['id']}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading{{playlist}}">
        <div class="panel-body">
            <div>{{playlist['description']}}</div>
        </div>
        <label class="control-label">Songs</label>
        <div>
            <select class="form-control" style="width: 100%" id="selectSongs{{playlist['id']}}" multiple="multiple">

</select>
</div>
<div><ul id="songList"></ul></div>

<script>
            $("#collapse{{playlist['id']}}").on('shown.bs.collapse', function () {
                $.ajax({
                    url: "/playlists/{{playlist['id']}}/songs",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        var temp_data = $.map(data, function (obj) {
                            return {
                                id: obj.id,
                                text: obj.name + "\nAlbum:" + obj.album
                            }
                        });

                        $("#selectSongs{{playlist['id']}}").select2({
                            data: songs
                            
                        }).on('change', function(e) {
                            $.ajax({
                                type: "PUT",
                                url: "/playlists/{{playlist['id']}}",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (data) {
                                    
                            }
                        })    
                        .select2('data', temp_data);
                        
                        });

                }});
            })


        </script>
</div>
</div>